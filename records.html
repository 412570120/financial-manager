<script>
    // 綁定登出按鈕點擊事件
    document.getElementById("logout-link").addEventListener("click", function (event) {
        event.preventDefault(); // 阻止連結的預設行為
        alert("登出成功!"); // 顯示提示框
        window.location.href = "index.html"; // 跳轉至登入頁
    });

    // 綁定新增記錄表單提交事件
    document.getElementById("add-record-form").addEventListener("submit", function (event) {
        event.preventDefault(); // 防止表單提交刷新頁面

        // 取得表單資料
        const recordType = document.getElementById("record-type").value;
        const recordMenu = document.getElementById("record-menu").value;
        const recordAmount = document.getElementById("record-amount").value;
        const recordDate = document.getElementById("record-date").value;

        // 將資料包裝成 JSON 格式
        const recordData = {
            type: recordType,
            menu: recordMenu,
            amount: recordAmount,
            date: recordDate,
        };

        // 發送 POST 請求到後端伺服器
        fetch('http://localhost:3000/record', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(recordData),
        })
        .then(response => response.json())
        .then(data => {
            if (data.message === '新增成功') {
                // 顯示新增成功彈窗
                document.getElementById("success-popup").classList.remove("hidden");
                document.getElementById("add-record-form").reset(); // 清空表單
            } else {
                alert("新增失敗：" + data.message);
            }
        })
        .catch(error => {
            console.error('錯誤:', error);
            alert("伺服器錯誤，請稍後再試");
        });
    });

    // 綁定彈窗的關閉按鈕
    document.getElementById("close-popup").addEventListener("click", function () {
        document.getElementById("success-popup").classList.add("hidden");
    });
</script>
